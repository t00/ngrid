{"id":"concepts/datasource/introduction","title":"Introduction","contents":"<h1 id=\"the-data-source\"><a href=\"#the-data-source\" aria-hidden><span class=\"icon icon-link\"></span></a>The Data Source</h1>\n<p>To render rows of data the table requires a source of data.\nA data source an be an array of items or a container of an array of items.</p>\n<p>You can provide the following datasources:</p>\n<ul>\n<li>Array - Direct interface</li>\n<li>Promise - Async interface</li>\n<li>Observable - Async stream interface</li>\n<li><code class=\"language-text\">PblDataSource</code> - Async stream interface</li>\n</ul>\n<p>The table supports all of the above but works with <code class=\"language-text\">PblDataSource&lt;T&gt;</code>.\nWhen an array, promise or observable is provided it is converted into <code class=\"language-text\">PblDataSource&lt;T&gt;</code>.</p>\n<h2 id=\"array-promise-observable\"><a href=\"#array-promise-observable\" aria-hidden><span class=\"icon icon-link\"></span></a>Array, Promise, Observable</h2>\n<p>The most primitive source of data is an array of items where each item represents a row in the table.</p>\n<div><div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> dataSource <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    id<span class=\"token punctuation\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n    name<span class=\"token punctuation\">:</span> <span class=\"token string\">'John Doe'</span><span class=\"token punctuation\">,</span>\n    email<span class=\"token punctuation\">:</span> <span class=\"token string\">'john.doe@anonymous.com'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div></div>\n<div pbl-example-view=\"pbl-datasource-introduction-simple-model-example\"></div>\n<p>Using a <strong>Promise</strong> adds async functionality and using an <strong>Observable</strong> adds streaming capabilities on top of that.</p>\n<p>In simple scenarios this is enough but it stops there, these datasources does not scale.</p>\n<h2 id=\"scaling-up\"><a href=\"#scaling-up\" aria-hidden><span class=\"icon icon-link\"></span></a>Scaling up</h2>\n<p>The table operates in different scenarios supporting a lot of features. Each feature is required to work in all scenarios.</p>\n<p>Let's demonstrate using the 2 most common scenarios:</p>\n<ul>\n<li>Client Side - The entire datasource is in one collection</li>\n<li>Server Size - A portion of the datasource is available, getting more items require a manual operation (e.g. calling the serve)</li>\n</ul>\n<p>With 3 common features: Sorting, Filtering and Pagination.</p>\n<p>In <strong>client side</strong> mode the entire logic is local, performed on the entire collection. In <strong>server side</strong> this is not possible\nand the logic sits on the remote source.</p>\n<p>We need to find a simple way to support both scenarios in a single, easy to use API.</p>\n<h2 id=\"pbldatasource\"><a href=\"#pbldatasource\" aria-hidden><span class=\"icon icon-link\"></span></a>PblDataSource</h2>\n<p>To scale up the table provides the datasource container <code class=\"language-text\">PblDataSource&lt;T&gt;</code> with a simple to use datasource factory.</p>\n<p>Using the <code class=\"language-text\">PblDataSource&lt;T&gt;</code> API you can invoke a manual data update, define the sorters, filters and more.<br>\nUsing the factory you can create and define a datasource with a simple API that handles sorting, filtering and pagination for us in client side more\nwhile providing an dead simple API for reacting to sort, filter and pagination updates in server side mode.</p>\n<div pbl-example-view=\"pbl-working-with-pbl-datasource-example\" containerClass=\"table-height-300 mat-elevation-z7\"></div>\n<h2 id=\"datasource-factory\"><a href=\"#datasource-factory\" aria-hidden><span class=\"icon icon-link\"></span></a>Datasource Factory</h2>\n<p>Using the datasource factory we define and create the datasource.</p>\n<p>The core functionality of the datasource is to provide data and with the factory this is very simple:</p>\n<div><div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> dataSource <span class=\"token operator\">=</span> createDS<span class=\"token operator\">&lt;</span>Person<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">onTrigger</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div></div>\n<p>The handler provided to the <code class=\"language-text\">onTrigger</code> method accepts the event and returns <code class=\"language-text\">DataSourceOf&lt;T&gt;</code> (array, promise or observable)</p>\n<p>The event describes the source of the trigger and any additional data related to the trigger. For example, if the trigger originated from\na pagination change, sort change etc.</p>\n<p>Based on the definitions, the factory will trigger events or handle them internally.</p>\n<blockquote class=\"info icon\">\n<div class=\"icon-location\"></div>\n The datasource factory implements a fluent API\n</blockquote>\n<p>The various scenarios is covered in depth <a href=\"../factory\">in here</a>.</p>\n<h2 id=\"advanced-scenarios\"><a href=\"#advanced-scenarios\" aria-hidden><span class=\"icon icon-link\"></span></a>Advanced scenarios</h2>\n<p>The datasource factory will work for you almost all use cases, however, sometimes a custom approach is required.</p>\n<p>The actual structure of the datasource is split into 2 parts:</p>\n<ul>\n<li><code class=\"language-text\">PblDataSource&lt;T&gt;</code></li>\n<li><code class=\"language-text\">PblDataSourceAdapter&lt;T, TData&gt;</code></li>\n</ul>\n<p><code class=\"language-text\">PblDataSource&lt;T&gt;</code> handles all external APIs, the adapter implements the logic and the factory binds the two.</p>\n<p>For example, the factory that comes with the table is bundled with an adapter that automatically handles sorting, filtering and pagination\n(client side mode) but also contains logic that allow \"outsourcing\" selected operations to the user.</p>\n<p>For example, in server side mode opting to manually implement pagination will result in an event triggered every time the pagination changed\nexpecting a new source of data from the event handler.</p>\n"}